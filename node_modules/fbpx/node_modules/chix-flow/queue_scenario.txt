To really test what is going on

I might create a queue scenario test.

QueueScenario(qm).should.eql(
 // queue history
);

This could be base on object observe.

